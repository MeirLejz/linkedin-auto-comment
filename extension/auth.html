<!DOCTYPE html>
<html>
<head>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="./supabase-config.js" type="module"></script>
</head>
<body>
  <script>
    import { supabase } from './supabase-config.js';
    
    async function handleAuth() {
      try {
        const { data, error } = await supabase.auth.getSessionFromUrl();
        if (!error) {
          chrome.runtime.sendMessage({
            action: "storeSession",
            session: data.session
          });
        }
        window.close();
      } catch (error) {
        console.error('Authentication error:', error);
      }
    }
    
    handleAuth();
  </script>
</body>
</html>
